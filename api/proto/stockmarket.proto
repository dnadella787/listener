syntax = "proto3";

service StockMarket {
    rpc GetExchange (GetExchangeRequest) returns (GetExchangeResponse);
    rpc ListExchanges (ListExchangesRequest) returns (ListExchangesResponse);
    rpc GetStock (GetStockRequest) returns (GetStockResponse);
    rpc ListStocks (ListStockRequest) returns (ListStockResponse);
}

// *****************************
// * Exchange APIs and objects *
// *****************************
message GetExchangeRequest {
    string code = 1;
}

message GetExchangeResponse {
    Exchange exchange = 1;
}

message ListExchangesRequest {
    string country = 1;
    int32 page_size = 2;
    string page_token = 3;
}

message ListExchangesResponse {
    repeated Exchange exchange = 1;
    string next_page_token = 2;
}

message Exchange {
    string code = 1;
    string full_name = 2;
    Money current_price = 3;
    float current_pe_ratio = 4;
    string city = 5;
    string country = 6;
}

// *******************************
// * Securities APIs and objects *
// *******************************
message GetStockRequest {
    string symbol = 1;
}

message GetStockResponse {
    Stock stock = 1;
}

message ListStockRequest {
    int32 page_size = 1;
    string page_token = 2;
}

message ListStockResponse {
    repeated Stock stocks = 1;
    string next_page_token = 2;
}

message Stock {
    string symbol = 1;
    string full_name = 2;
    Money current_price = 3;
    float current_pe_ratio = 4;
}

message Money {
    string currency_code = 1;
    float price = 2;
}